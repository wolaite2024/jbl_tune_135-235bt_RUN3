#include "rtl876x_pinmux.h"
#include "rtl876x_gpio.h"
#include "gap_timer.h"
#include "hal_gpio.h"
#include "section.h"
#include "trace.h"
#include "os_sched.h"
#include "pm.h"
#include "single_tone.h"
#include "app_main.h"
#include "app_dlps.h"
#include "app_cfg.h"
#include "app_gpio.h"
#include "app_io_msg.h"
#include "adc_manager.h"
#include "app_mmi.h"
#include "app_harman_adc.h"
#include "app_ext_charger.h"
#if HARMAN_VBAT_ONE_ADC_DETECTION
#include "app_harman_ntc_const.h"


const battery_hysteresis_t ntc_hysteresis_voltage_array[] = 
{
	{HARMAN_BATTERY_NTC_68K,	10},
	{HARMAN_BATTERY_NTC_10K,	4},
	{HARMAN_BATTERY_NTC_47K,	10},
	{HARMAN_BATTERY_NTC_100K,	10},
};
const int battery_ntc_offset[] = {55,35,55,45};//68K 10K 47K 100K

const battery_ntc_value_t battery_ntc_adc_array[BATTERY_NTC_MAX_LENGTH]=
{
/*  wendu    68K    10K     47K     100K  */
/*           55      35     55       45*/
	{-20 	,{850   ,432 	,801	,878}}, 
	{-19 	,{844   ,421 	,794	,874}}, 
	{-18 	,{839   ,417 	,786	,870}}, 
	{-17 	,{833   ,402 	,778	,865}}, 
	{-16 	,{827   ,382 	,770	,861}}, 
	{-15 	,{821   ,381 	,762	,856}}, 
	{-14 	,{814   ,371 	,753	,851}}, 
	{-13 	,{807   ,360 	,745	,846}}, 
	{-12 	,{800   ,349 	,735	,841}}, 
	{-11 	,{793   ,339 	,726	,835}}, 
	{-10 	,{785   ,329 	,717	,830}}, 
	{-9		,{778   ,320 	,707	,824}}, 
	{-8		,{770   ,311 	,697	,818}}, 
	{-7		,{761   ,302 	,687	,811}}, 
	{-6		,{753   ,292 	,677	,805}}, 
	{-5		,{744   ,285 	,666	,798}}, 
	{-4		,{735   ,276 	,656	,791}}, 
	{-3		,{726   ,270 	,645	,784}}, 
	{-2		,{716   ,263 	,634	,776}}, 
	{-1		,{707   ,252 	,623	,768}}, 
	{0		,{697   ,243 	,612	,760}}, 
	{1		,{687   ,233 	,600	,752}}, 
	{2		,{676   ,229 	,589	,744}}, 
	{3		,{666   ,222 	,577	,735}}, 
	{4		,{655   ,215 	,566	,726}}, 
	{5		,{645   ,209 	,554	,717}}, 
	{6		,{634   ,203 	,543	,708}}, 
	{7		,{623   ,196 	,531	,699}}, 
	{8		,{612   ,190 	,519	,689}}, 
	{9		,{600   ,188 	,508	,679}}, 
	{10		,{589   ,179 	,496	,669}}, 
	{11		,{577   ,173 	,485	,659}}, 
	{12		,{566   ,167 	,473	,649}}, 
	{13		,{554   ,163 	,462	,639}}, 
	{14		,{543   ,157 	,450	,628}}, 
	{15		,{531   ,152 	,439	,617}}, 
	{16		,{520   ,148 	,428	,607}}, 
	{17		,{508   ,143 	,417	,596}}, 
	{18		,{496   ,139 	,406	,585}}, 
	{19		,{485   ,135 	,395	,574}}, 
	{20		,{473   ,131 	,385	,563}}, 
	{21		,{462   ,127 	,374	,552}}, 
	{22		,{451   ,124 	,364	,541}}, 
	{23		,{439   ,121 	,354	,530}}, 
	{24		,{428   ,117 	,344	,519}}, 
	{25		,{417   ,113 	,334	,508}},
	{26		,{406   ,109 	,324	,497}},
	{27		,{395   ,106 	,315	,486}},
	{28		,{385   ,104 	,306	,475}},
	{29		,{374   ,101 	,297	,464}},
	{30		,{364   ,98 	,288	,453}},
	{31		,{354   ,95 	,279	,442}},
	{32		,{344   ,92 	,271	,431}},
	{33		,{334   ,90 	,262	,421}},
	{34		,{324   ,87 	,254	,410}},
	{35		,{315   ,85 	,246	,400}},
	{36		,{305   ,83 	,239	,390}},
	{37		,{296   ,80 	,231	,380}},
	{38		,{288   ,79 	,224	,370}},
	{39		,{279   ,76 	,217	,360}},
	{40		,{270   ,74 	,210	,350}},
	{41		,{262   ,72 	,204	,341}},
	{42		,{254   ,70 	,197	,332}},
	{43		,{246   ,69 	,191	,322}},
	{44		,{238   ,67 	,185	,313}},
	{45		,{231   ,65 	,179	,305}},
	{46		,{224   ,63 	,173	,296}},
	{47		,{217   ,62 	,167	,287}},
	{48		,{210   ,60 	,162	,279}},
	{49		,{203   ,59 	,157	,271}},
	{50		,{197   ,57 	,152	,263}},
	{51		,{190   ,56 	,147	,255}},
	{52		,{184   ,55 	,142	,248}},
	{53		,{178   ,54 	,137	,241}},
	{54		,{172   ,53 	,133	,233}},
	{55		,{167   ,52 	,129	,226}},
	{56		,{161   ,51 	,124	,220}},
	{57		,{156   ,50 	,120	,213}},
	{58		,{151   ,49 	,116	,207}},
	{59		,{146   ,48 	,113	,200}},
	{60		,{141   ,47 	,109	,194}},
};                                  

#if 0//10K ntc valu ng
const battery_ntc_value_t battery_ntc_adc_array[BATTERY_NTC_MAX_LENGTH]=
{
/*  wendu    68K    10K     47K     100K  */
/*           55      35     55       45*/
	{-20 	,{850   ,423	,801	,878}}, 
	{-19 	,{844   ,411	,794	,874}}, 
	{-18 	,{839   ,400	,786	,870}}, 
	{-17 	,{833   ,389	,778	,865}}, 
	{-16 	,{827   ,378	,770	,861}}, 
	{-15 	,{821   ,367	,762	,856}}, 
	{-14 	,{814   ,356	,753	,851}}, 
	{-13 	,{807   ,346	,745	,846}}, 
	{-12 	,{800   ,336	,735	,841}}, 
	{-11 	,{793   ,326	,726	,835}}, 
	{-10 	,{785   ,316	,717	,830}}, 
	{-9		,{778   ,306	,707	,824}}, 
	{-8		,{770   ,297	,697	,818}}, 
	{-7		,{761   ,287	,687	,811}}, 
	{-6		,{753   ,278	,677	,805}}, 
	{-6		,{744   ,270	,666	,798}}, 
	{-4		,{735   ,261	,656	,791}}, 
	{-3		,{726   ,253	,645	,784}}, 
	{-2		,{716   ,245	,634	,776}}, 
	{-1		,{707   ,237	,623	,768}}, 
	{0		,{697   ,229	,612	,760}}, 
	{1		,{687   ,222	,600	,752}}, 
	{2		,{676   ,214	,589	,744}}, 
	{3		,{666   ,207	,577	,735}}, 
	{4		,{655   ,201	,566	,726}}, 
	{5		,{645   ,194	,554	,717}}, 
	{6		,{634   ,188	,543	,708}}, 
	{7		,{623   ,181	,531	,699}}, 
	{8		,{612   ,175	,519	,689}}, 
	{9		,{600   ,170	,508	,679}}, 
	{10		,{589   ,164	,496	,669}}, 
	{11		,{577   ,158	,485	,659}}, 
	{12		,{566   ,153	,473	,649}}, 
	{13		,{554   ,148	,462	,639}}, 
	{14		,{543   ,143	,450	,628}}, 
	{15		,{531   ,138	,439	,617}}, 
	{16		,{520   ,134	,428	,607}}, 
	{17		,{508   ,129	,417	,596}}, 
	{18		,{496   ,125	,406	,585}}, 
	{19		,{485   ,121	,395	,574}}, 
	{20		,{473   ,117	,385	,563}}, 
	{21		,{462   ,113	,374	,552}}, 
	{22		,{451   ,109	,364	,541}}, 
	{23		,{439   ,105	,354	,530}}, 
	{24		,{428   ,102	,344	,519}}, 
	{25		,{417   ,99 	,334	,508}},
	{26		,{406   ,95 	,324	,497}},
	{27		,{395   ,92 	,315	,486}},
	{28		,{385   ,89 	,306	,475}},
	{29		,{374   ,86 	,297	,464}},
	{30		,{364   ,83 	,288	,453}},
	{31		,{354   ,81 	,279	,442}},
	{32		,{344   ,78 	,271	,431}},
	{33		,{334   ,75 	,262	,421}},
	{34		,{324   ,73 	,254	,410}},
	{35		,{315   ,71 	,246	,400}},
	{36		,{305   ,68 	,239	,390}},
	{37		,{296   ,66 	,231	,380}},
	{38		,{288   ,64 	,224	,370}},
	{39		,{279   ,62 	,217	,360}},
	{40		,{270   ,60 	,210	,350}},
	{41		,{262   ,58 	,204	,341}},
	{42		,{254   ,56 	,197	,332}},
	{43		,{246   ,54 	,191	,322}},
	{44		,{238   ,53 	,185	,313}},
	{45		,{231   ,51 	,179	,305}},
	{46		,{224   ,49 	,173	,296}},
	{47		,{217   ,48 	,167	,287}},
	{48		,{210   ,46 	,162	,279}},
	{49		,{203   ,45 	,157	,271}},
	{50		,{197   ,44 	,152	,263}},
	{51		,{190   ,42 	,147	,255}},
	{52		,{184   ,41 	,142	,248}},
	{53		,{178   ,40 	,137	,241}},
	{54		,{172   ,38 	,133	,233}},
	{55		,{167   ,37 	,129	,226}},
	{56		,{161   ,36 	,124	,220}},
	{57		,{156   ,35 	,120	,213}},
	{58		,{151   ,34 	,116	,207}},
	{59		,{146   ,33 	,113	,200}},
	{60		,{141   ,32 	,109	,194}},
};                                  
#endif
#endif
#if 0
const battery_ntc_value_t ntc_100k_array[]=
{
	{-20	,878}, 
	{-19	,874}, 
	{-18	,870}, 
	{-17	,865}, 
	{-16	,861}, 
	{-15	,856}, 
	{-14	,851}, 
	{-13	,846}, 
	{-12	,841}, 
	{-11	,835}, 
	{-10	,830}, 
	{-9		,824}, 
	{-8		,818}, 
	{-7		,811}, 
	{-6		,805}, 
	{-6		,798}, 
	{-4		,791}, 
	{-3		,784}, 
	{-2		,776}, 
	{-1		,768}, 
	{0		,760}, 
	{1		,752}, 
	{2		,744}, 
	{3		,735}, 
	{4		,726}, 
	{5		,717}, 
	{6		,708}, 
	{7		,699}, 
	{8		,689}, 
	{9		,679}, 
	{10		,669}, 
	{11		,659}, 
	{12		,649}, 
	{13		,639}, 
	{14		,628}, 
	{15		,617}, 
	{16		,607}, 
	{17		,596}, 
	{18		,585}, 
	{19		,574}, 
	{20		,563}, 
	{21		,552}, 
	{22		,541}, 
	{23		,530}, 
	{24		,519}, 
	{25		,508}, 
	{26		,497}, 
	{27		,486}, 
	{28		,475}, 
	{29		,464}, 
	{30		,453}, 
	{31		,442}, 
	{32		,431}, 
	{33		,421}, 
	{34		,410}, 
	{35		,400}, 
	{36		,390}, 
	{37		,380}, 
	{38		,370}, 
	{39		,360}, 
	{40		,350}, 
	{41		,341}, 
	{42		,332}, 
	{43		,322}, 
	{44		,313}, 
	{45		,305}, 
	{46		,296}, 
	{47		,287}, 
	{48		,279}, 
	{49		,271}, 
	{50		,263}, 
	{51		,255}, 
	{52		,248}, 
	{53		,241}, 
	{54		,233}, 
	{55		,226}, 
	{56		,220}, 
	{57		,213}, 
	{58		,207}, 
	{59		,200}, 
	{60		,194}, 
};

const battery_ntc_value_t ntc_68k_array[]=
{
	{-20 	,850}, 
	{-19 	,844}, 
	{-18 	,839}, 
	{-17 	,833}, 
	{-16 	,827}, 
	{-15 	,821}, 
	{-14 	,814}, 
	{-13 	,807}, 
	{-12 	,800}, 
	{-11 	,793}, 
	{-10 	,785}, 
	{-9		,778}, 
	{-8		,770}, 
	{-7		,761}, 
	{-6		,753}, 
	{-6		,744}, 
	{-4		,735}, 
	{-3		,726}, 
	{-2		,716}, 
	{-1		,707}, 
	{0		,697}, 
	{1		,687}, 
	{2		,676}, 
	{3		,666}, 
	{4		,655}, 
	{5		,645}, 
	{6		,634}, 
	{7		,623}, 
	{8		,612}, 
	{9		,600}, 
	{10		,589}, 
	{11		,577}, 
	{12		,566}, 
	{13		,554}, 
	{14		,543}, 
	{15		,531}, 
	{16		,520}, 
	{17		,508}, 
	{18		,496}, 
	{19		,485}, 
	{20		,473}, 
	{21		,462}, 
	{22		,451}, 
	{23		,439}, 
	{24		,428}, 
	{25		,417}, 
	{26		,406}, 
	{27		,395}, 
	{28		,385}, 
	{29		,374}, 
	{30		,364}, 
	{31		,354}, 
	{32		,344}, 
	{33		,334}, 
	{34		,324}, 
	{35		,315}, 
	{36		,305}, 
	{37		,296}, 
	{38		,288}, 
	{39		,279}, 
	{40		,270}, 
	{41		,262}, 
	{42		,254}, 
	{43		,246}, 
	{44		,238}, 
	{45		,231}, 
	{46		,224}, 
	{47		,217}, 
	{48		,210}, 
	{49		,203}, 
	{50		,197}, 
	{51		,190}, 
	{52		,184}, 
	{53		,178}, 
	{54		,172}, 
	{55		,167}, 
	{56		,161}, 
	{57		,156}, 
	{58		,151}, 
	{59		,146}, 
	{60		,141}, 
};

const battery_ntc_value_t ntc_47k_array[]=
{
	{-20 	,801}, 
	{-19 	,794}, 
	{-18 	,786}, 
	{-17 	,778}, 
	{-16 	,770}, 
	{-15 	,762}, 
	{-14 	,753}, 
	{-13 	,745}, 
	{-12 	,735}, 
	{-11 	,726}, 
	{-10 	,717}, 
	{-9		,707}, 
	{-8		,697}, 
	{-7		,687}, 
	{-6		,677}, 
	{-6		,666}, 
	{-4		,656}, 
	{-3		,645}, 
	{-2		,634}, 
	{-1		,623}, 
	{0		,612}, 
	{1		,600}, 
	{2		,589}, 
	{3		,577}, 
	{4		,566}, 
	{5		,554}, 
	{6		,543}, 
	{7		,531}, 
	{8		,519}, 
	{9		,508}, 
	{10		,496}, 
	{11		,485}, 
	{12		,473}, 
	{13		,462}, 
	{14		,450}, 
	{15		,439}, 
	{16		,428}, 
	{17		,417}, 
	{18		,406}, 
	{19		,395}, 
	{20		,385}, 
	{21		,374}, 
	{22		,364}, 
	{23		,354}, 
	{24		,344}, 
	{25		,334}, 
	{26		,324}, 
	{27		,315}, 
	{28		,306}, 
	{29		,297}, 
	{30		,288}, 
	{31		,279}, 
	{32		,271}, 
	{33		,262}, 
	{34		,254}, 
	{35		,246}, 
	{36		,239}, 
	{37		,231}, 
	{38		,224}, 
	{39		,217}, 
	{40		,210}, 
	{41		,204}, 
	{42		,197}, 
	{43		,191}, 
	{44		,185}, 
	{45		,179}, 
	{46		,173}, 
	{47		,167}, 
	{48		,162}, 
	{49		,157}, 
	{50		,152}, 
	{51		,147}, 
	{52		,142}, 
	{53		,137}, 
	{54		,133}, 
	{55		,129}, 
	{56		,124}, 
	{57		,120}, 
	{58		,116}, 
	{59		,113}, 
	{60		,109}, 
};

const battery_ntc_value_t ntc_10k_array[]=
{
	{-20 	,423}, 
	{-19 	,411}, 
	{-18 	,400}, 
	{-17 	,389}, 
	{-16 	,378}, 
	{-15 	,367}, 
	{-14 	,356}, 
	{-13 	,346}, 
	{-12 	,336}, 
	{-11 	,326}, 
	{-10 	,316}, 
	{-9		,306}, 
	{-8		,297}, 
	{-7		,287}, 
	{-6		,278}, 
	{-6		,270}, 
	{-4		,261}, 
	{-3		,253}, 
	{-2		,245}, 
	{-1		,237}, 
	{0		,229}, 
	{1		,222}, 
	{2		,214}, 
	{3		,207}, 
	{4		,201}, 
	{5		,194}, 
	{6		,188}, 
	{7		,181}, 
	{8		,175}, 
	{9		,170}, 
	{10		,164}, 
	{11		,158}, 
	{12		,153}, 
	{13		,148}, 
	{14		,143}, 
	{15		,138}, 
	{16		,134}, 
	{17		,129}, 
	{18		,125}, 
	{19		,121}, 
	{20		,117}, 
	{21		,113}, 
	{22		,109}, 
	{23		,105}, 
	{24		,102}, 
	{25		,99 },
	{26		,95 },
	{27		,92 },
	{28		,89 },
	{29		,86 },
	{30		,83 },
	{31		,81 },
	{32		,78 },
	{33		,75 },
	{34		,73 },
	{35		,71 },
	{36		,68 },
	{37		,66 },
	{38		,64 },
	{39		,62 },
	{40		,60 },
	{41		,58 },
	{42		,56 },
	{43		,54 },
	{44		,53 },
	{45		,51 },
	{46		,49 },
	{47		,48 },
	{48		,46 },
	{49		,45 },
	{50		,44 },
	{51		,42 },
	{52		,41 },
	{53		,40 },
	{54		,38 },
	{55		,37 },
	{56		,36 },
	{57		,35 },
	{58		,34 },
	{59		,33 },
	{60		,32 },
};
#endif



